From e53da9fe93a8cf86b58f7f1938a01c9f08f968ad Mon Sep 17 00:00:00 2001
From: David Eddlemon <neo@TheMatrix.com>
Date: Wed, 5 Jun 2013 21:39:45 +0400
Subject: [PATCH] Use -fno-strict-aliasing - Linaro Fix

---
 e2fsck/Android.mk    | 2 +-
 lib/blkid/Android.mk | 4 ++--
 2 files changed, 3 insertions(+), 3 deletions(-)

diff --git a/e2fsck/Android.mk b/e2fsck/Android.mk
index 316b649..db33920 100644
--- a/e2fsck/Android.mk
+++ b/e2fsck/Android.mk
@@ -116,7 +116,7 @@ e2fsck_system_shared_libraries := libc
 
 e2fsck_c_includes := external/e2fsprogs/lib
 
-e2fsck_cflags := -O2 -g -W -Wall \
+e2fsck_cflags := -O2 -g -W -Wall -fno-strict-aliasing -Wmissing-field-initializers \
 	-DHAVE_DIRENT_H \
 	-DHAVE_ERRNO_H \
 	-DHAVE_INTTYPES_H \
diff --git a/lib/blkid/Android.mk b/lib/blkid/Android.mk
index 209da82..cc4ef61 100644
--- a/lib/blkid/Android.mk
+++ b/lib/blkid/Android.mk
@@ -22,7 +22,7 @@ libext2_blkid_system_shared_libraries := libc
 
 libext2_blkid_c_includes := external/e2fsprogs/lib
 
-libext2_blkid_cflags := -O2 -g -W -Wall \
+libext2_blkid_cflags := -O2 -g -W -Wall -fno-strict-aliasing \
 	-DHAVE_UNISTD_H \
 	-DHAVE_ERRNO_H \
 	-DHAVE_NETINET_IN_H \
@@ -56,7 +56,7 @@ LOCAL_SRC_FILES := $(libext2_blkid_src_files)
 LOCAL_SYSTEM_SHARED_LIBRARIES := $(libext2_blkid_system_shared_libraries)
 LOCAL_SHARED_LIBRARIES := $(libext2_blkid_shared_libraries)
 LOCAL_C_INCLUDES := $(libext2_blkid_c_includes)
-LOCAL_CFLAGS := $(libext2_blkid_cflags) $(libext2_blkid_cflags_linux)
+LOCAL_CFLAGS := $(libext2_blkid_cflags) $(libext2_blkid_cflags_linux) -fno-strict-aliasing
 LOCAL_PRELINK_MODULE := false
 LOCAL_MODULE := libext2_blkid
 LOCAL_MODULE_TAGS := optional
-- 
1.8.1.6

